version: 2.1

orbs:
  node: circleci/node@5

parameters:
  run-schedule:
    type: boolean
    default: false

jobs:
  wakeup:
    docker:
      - image: cimg/node:16.0
    steps:
      - checkout
      - run:
          name: Wake up Strapi Server
          command: curl -s -o /dev/null -w "%{http_code}" https://kmuvcd-strapi.onrender.com

workflows:
  scheduled_wakeup:
    when: << pipeline.parameters.run-schedule >>
    jobs:
      - wakeup
